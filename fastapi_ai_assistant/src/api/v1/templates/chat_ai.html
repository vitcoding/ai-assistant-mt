<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>ИИ чат</title>
    <link rel="stylesheet" href="/static/styles/chat_ai.css">
</head>

<body>
    <section class="chat_header">
        <div class="wrapper">
            <div class="header__about">
                <h1>Чат с ИИ Ассистентом</h1>
            </div>
            <div class="header__chat_params">
                <label>Item ID: <input type="text" id="itemId" autocomplete="off" value="foo" /></label>
                <label>Token: <input type="text" id="token" autocomplete="off" value="some-key-token" /></label>
            </div>
            <div class="header__model">
                <select id="dropdownModel">
                    {% for item in models %}
                    <option value="{{ loop.index }}" {% if loop.first %}selected{% endif %}>{{ item }}</option>
                    {% endfor %}
                </select>
                <label for="dropdown"> - выберите LLM модель</label>
            </div>
            <div class="header__language">
                <select id="dropdownLanguage">
                    {% for item in languages %}
                    <option value="{{ loop.index }}" {% if loop.first %}selected{% endif %}>{{ item }}</option>
                    {% endfor %}
                </select>
                <label for="dropdown"> - выберите язык, на котором будет отвечать ассистент</label>
            </div>

            <div class="header__use_rag">
                <input type="checkbox" id="checkboxRag" name="use_rag">
                <label for="checkboxRag">Использовать RAG</label>
            </div>
            <button onclick="connect(event)">Начать новый чат</button>
        </div>
    </section>

    <section class="chat_body" id="chatBody">
        <div class="wrapper">
            <div class="message_items">
                <div id='messages'>
                </div>
                <div class="temporary">
                    <div></div>
                </div>
            </div>
        </div>
    </section>

    <section class="chat_message">
        <div class="wrapper">
            <form action="" onsubmit="sendMessage(event)" class="form_message">
                <div class="send_message">
                    <label for="messageText">Сообщение:</label>
                    <textarea id="messageText" autocomplete="off"></textarea>
                    <button id="sendMessageButton">Отправить</button>
                </div>
            </form>
            <div class="audio_message">
                <h3>Запись Голоса</h3>

                <button id="startRecordButton" onclick="startRecording()">Начать Запись</button>
                <button id="stopRecordButton" onclick="stopRecording()" disabled>Остановить Запись</button>

                <a id="downloadLink" download="recorded-audio.wav"></a>
            </div>
        </div>
    </section>

    <script src="/static/js/chat_ai.js"></script>
    <script src="/static/js/audio_message.js"></script>
</body>

</html>